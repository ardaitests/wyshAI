!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}(),document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("chat-container"),t=document.getElementById("message-input"),n=document.getElementById("send-button"),o=document.getElementById("typing-indicator"),s=sessionStorage.getItem("sessionId")||`sess_${Math.random().toString(36).substr(2,9)}`;function r(){n.disabled=""===t.value.trim()}function a(t,n){const o=document.createElement("div");o.className=`message ${t}-message`;const s=document.createElement("div");s.className="message-avatar",s.textContent="user"===t?"You":"AI";const r=document.createElement("div");r.className="message-content";const a=document.createElement("div");a.className="message-role",a.textContent="user"===t?"You":"WyshAI";const i=document.createElement("div");i.className="message-text",i.innerHTML=n.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`([^`]+)`/g,"<code>$1</code>").replace(/\n/g,"<br>").replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>'),r.appendChild(a),r.appendChild(i),o.appendChild(s),o.appendChild(r),e.appendChild(o),l()}function i(e){o.classList.toggle("visible",e),e&&l()}function l(){e.scrollTop=e.scrollHeight}async function c(){const e=t.value.trim();if(e){a("user",e),t.value="",t.style.height="auto",r(),i(!0);try{a("assistant",await new Promise((e=>{setTimeout((()=>{const t=["I can help you schedule an appointment. What date and time works best for you?","I'll check my calendar for available slots. Could you tell me your preferred time?","I'm happy to help schedule your appointment. What's the purpose of your visit?","I can see you're interested in scheduling. Would you prefer a morning or afternoon appointment?","Let me find the best available time for you. Could you tell me your availability this week?"],n=t[Math.floor(Math.random()*t.length)];e(n)}),1e3+1e3*Math.random())})))}catch(n){console.error("Error:",n),a("assistant","Sorry, I encountered an error. Please try again.")}finally{i(!1)}}}sessionStorage.setItem("sessionId",s),sessionStorage.getItem("chatInitialized")||(a("assistant","Hello! I'm your WyshAI scheduling assistant. How can I help you schedule your appointment today?"),sessionStorage.setItem("chatInitialized","true")),t.addEventListener("input",(function(){this.style.height="auto",this.style.height=this.scrollHeight+"px",r()})),t.addEventListener("keydown",(function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),c())})),n.addEventListener("click",c),r(),l()}));
